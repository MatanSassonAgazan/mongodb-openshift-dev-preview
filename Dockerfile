FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"X3A6ICZfcAogIC0gbmFtZTogbW1zX2Jhc2VfdXJsCiAgICB0aXRsZTogT3BzIE1hbmFnZXIgVVJM\
CiAgICB0eXBlOiBzdHJpbmcKICAgIHJlcXVpcmVkOiBUcnVlCiAgICAjZGVmYXVsdDogJ2h0dHA6\
Ly9jbG91ZC5tb25nb2RiLmNvbScKICAgIGRlZmF1bHQ6ICdodHRwOi8vbG9jYWxob3N0OjgwODAn\
CiAgICAjZGVmYXVsdDogaHR0cDovL0phc29uc01hY0Jvb2s1NWxvY2FsLmxvY2FsOjg4ODgKICAg\
ICNkZWZhdWx0OiBodHRwOi8vMTkyLjE2OC4wLjE0Ojg4ODgKICAgIGRpc3BsYXlfZ3JvdXA6IE1v\
bmdvREIgT3BzIE1hbmFnZXIgQ29ubmVjdGlvbgogIC0gbmFtZTogbW1zX3VzZXIKICAgIHRpdGxl\
OiBPcHMgTWFuYWdlciB1c2VyCiAgICB0eXBlOiBzdHJpbmcKICAgIHJlcXVpcmVkOiBUcnVlCiAg\
ICBkZWZhdWx0OiBqYXNvbi5taW1pY2tAbW9uZ29kYi5jb20KICAgIGRpc3BsYXlfZ3JvdXA6IE1v\
bmdvREIgT3BzIE1hbmFnZXIgQ29ubmVjdGlvbgogIC0gbmFtZTogbW1zX3VzZXJfYXBpa2V5CiAg\
ICB0aXRsZTogVXNlcidzIE9wcyBNYW5hZ2VyIEFQSSBrZXkKICAgIHR5cGU6IHN0cmluZwogICAg\
cmVxdWlyZWQ6IFRydWUKICAgIGRlZmF1bHQ6IDBmNGE3MmVlLWQ1YzYtNDcyOS1hZmYwLTgxZmJj\
YjkzMWY3NQogICAgZGlzcGxheV90eXBlOiBzdHJpbmcKICAgIGRpc3BsYXlfZ3JvdXA6IE1vbmdv\
REIgT3BzIE1hbmFnZXIgQ29ubmVjdGlvbgojICAtIG5hbWU6IG1tc19hZ2VudF9hcGlrZXkKIyAg\
ICB0aXRsZTogT3BzIE1hbmFnZXIgQXVvdG1hdGlvbiBBZ2VudCBBUEkga2V5CiMgICAgdHlwZTog\
c3RyaW5nCiMgICAgcmVxdWlyZWQ6IFRydWUKIyAgICBkZWZhdWx0OiA1YTM0NGJlMmExZTg3ZDA5\
NWI4YmU4MjQ3MDIyNjU2MDMyYTkzYjJjNmU4ZjQ1ZmZmMWQ3NzFjYQojICAgIGRpc3BsYXlfdHlw\
ZTogc3RyaW5nCiMgICAgZGlzcGxheV9ncm91cDogTW9uZ29EQiBPcHMgTWFuYWdlciBDb25uZWN0\
aW9uCiAgLSBuYW1lOiBjbHVzdGVyX25hbWUKICAgIHRpdGxlOiBNb25nb0RCIENsdXN0ZXIgTmFt\
ZQogICAgdHlwZTogc3RyaW5nCiAgICBkZWZhdWx0OiAKICAgIHJlcXVpcmVkOiBUcnVlCiAgLSBu\
YW1lOiBub2Rlc19wZXJfcmVwbGljYXNldAogICAgdGl0bGU6IE51bWJlciBvZiBub2RlcyBpbiBS\
ZXBsaWNhIFNldAogICAgdHlwZTogc3RyaW5nIAogICAgZGVmYXVsdDogIjMiCiAgICByZXF1aXJl\
ZDogVHJ1ZQogIC0gbmFtZTogbW9uZ29kYl92ZXJzaW9uCiAgICB0aXRsZTogTW9uZ29EQiBWZXJz\
aW9uCiAgICB0eXBlOiBlbnVtCiAgICBkZWZhdWx0OiAnMy40LjEzJwogICAgZW51bTogWyAnMy40\
LjEzJywgJzMuNi4zJyBdCiAgICByZXF1aXJlZDogVHJ1ZQogIC0gbmFtZTogbW9uZ29kYl9wb3J0\
IAogICAgdGl0bGU6IFBvcnQgZm9yIE1vbmdvREIgdG8gbGlzdGVuIG9uCiAgICB0eXBlOiBzdHJp\
bmcKICAgIGRlZmF1bHQ6ICIyNzAwMCIKICAgIHJlcXVpcmVkOiBUcnVlCiAgLSBuYW1lOiBtbXNf\
YXBpX3VyaQogICAgdGl0bGU6IE1vbmdvREIgT3BzIE1hbmFnZXIgQVBJIFVSSQogICAgZGVmYXVs\
dDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvcHVibGljL3YxLjAnCiAgICAjZGVmYXVsdDog\
J2h0dHA6Ly9KYXNvbnNNYWNCb29rNTVsb2NhbC5sb2NhbDo4ODg4L2FwaS9wdWJsaWMvdjEuMCcK\
ICAgICNkZWZhdWx0OiAnaHR0cDovLzE5Mi4xNjguMC4xNDo4ODg4L2FwaS9wdWJsaWMvdjEuMCcK\
ICAgIHR5cGU6IHN0cmluZwogIC0gbmFtZTogbW1zX3Byb2plY3RfbmFtZQogICAgdGl0bGU6IFBy\
b2plY3QgdG8gY3JlYXRlIHJlcGxpY2Egc2V0IGluCiAgICBkZWZhdWx0OiAiIgogICAgdHlwZTog\
c3RyaW5nCiAgLSBuYW1lOiBtbXNfZGVmYXVsdF9vcmdJZAogICAgdGl0bGU6IE9yZ2FuaXphdGlv\
biBmb3IgbmV3IHByb2plY3QKICAgIGRlZmF1bHQ6ICI1YTkzNjJkNjZjZWY0NzBjMzc1YTk4NTUi\
CiAgICB0eXBlOiBzdHJpbmcKICAtIG5hbWU6IG1tc19hcGlfdGltZW91dAogICAgdGl0bGU6IE1v\
bmdvREIgT3BzIE1hbmFnZXIgQVBJIFRpbWVvdXQgaW4gc2Vjb25kcwogICAgZGVmYXVsdDogIjMw\
IgogICAgdHlwZTogc3RyaW5nCiAgLSBuYW1lOiBkaXNrX3NpemVfZ2IKICAgIHRpdGxlOiBTaXpl\
IGluIEdiIGZvciBwZXJzaXN0ZW50IHN0b3JhZ2UgY2xhaW0gb24gZGF0YSBub2RlCiAgICBkZWZh\
dWx0OiAiNSIKICAgIHR5cGU6IHN0cmluZwoKCgp2ZXJzaW9uOiAwLjEKbmFtZTogbW9uZ29kYi1l\
bnRlcnByaXNlCmRlc2NyaXB0aW9uOiBEZXBsb3kgTW9uZ29EQiBpbnRvIE9wZW5zaGlmdCB0aHJv\
dWdoIE9wcyBNYW5hZ2VyCmJpbmRhYmxlOiBUcnVlCmFzeW5jOiBvcHRpb25hbAptZXRhZGF0YToK\
ICBkaXNwbGF5TmFtZTogTW9uZ29EQiBFbnRlcnByaXNlCiAgZGVwZW5kZW5jaWVzOiBbICdjZW50\
b3MnIF0KICBpbWFnZVVybDogaHR0cHM6Ly93d3cubW9uZ29kYi5jb20vYXNzZXRzL2ltYWdlcy9j\
bG91ZC9hdGxhcy9pbGx1c3RyYXRpb25zL2xpdmUtaW1wb3J0LnBuZwogIGRvY3VtZW50YXRpb25V\
cmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9qYXNvbm1pbWljay9tb25nb2RiLW9wZW5zaGlmdC1kZXYt\
cHJldmlldwpwbGFuczoKICAtIG5hbWU6IHJlcGxpY2FzZXQKICAgIGRlc2NyaXB0aW9uOiBUaGlz\
IHBsYW4gZGVwbG95cyBhIE1vbmdvREIgcmVwbGljYSBzZXQKICAgIGZyZWU6IFRydWUKICAgIG1l\
dGFkYXRhOiAKICAgICBkaXNwbGF5TmFtZTogTW9uZ29EQiBSZXBsaWNhIFNldAogICAgIGxvbmdE\
ZXNjcmlwdGlvbjogVGhpcyBwbGFuIGRlcGxveXMgYSBNb25nb0RCIHJlcGxpY2EKICAgICBjb3N0\
OiAkMC4wMAogICAgcGFyYW1ldGVyczogKl9wCiAgLSBuYW1lOiBzdGFuZGFsb25lIAogICAgZGVz\
Y3JpcHRpb246IFRoaXMgcGxhbiBkZXBsb3lzIGEgU3RhbmQtYWxvbmUgTW9uZ29EQgogICAgZnJl\
ZTogVHJ1ZQogICAgbWV0YWRhdGE6IAogICAgIGRpc3BsYXlOYW1lOiBNb25nb0RCIFN0YW5kIEFs\
b25lIEluc3RhbmNlCiAgICAgbG9uZ0Rlc2NyaXB0aW9uOiBUaGlzIHBsYW4gZGVwbG95cyBhIHNp\
bmdsZSBNb25nb0RCIG5vZGUKICAgICBjb3N0OiAkMC4wMAogICAgcGFyYW1ldGVyczogKl9wCg=="

































COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY library /opt/ansible/library
RUN chmod -R g=u /opt/{ansible,apb}
ENV ANSIBLE_LIBRARY /opt/ansible/library
ENV ANSIBLE_ROLES_PATH /opt/ansible/roles:/etc/ansible/roles
USER apb
