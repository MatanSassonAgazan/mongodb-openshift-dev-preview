FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"X29wc01nckluZm86ICZfb3BzTWdySW5mbwogIC0gbmFtZTogbW1zX2Jhc2VfdXJsCiAgICB0aXRs\
ZTogT3BzIE1hbmFnZXIgVVJMCiAgICB0eXBlOiBzdHJpbmcKICAgIHJlcXVpcmVkOiBUcnVlCiAg\
ICAjZGVmYXVsdDogJ2h0dHA6Ly9jbG91ZC5tb25nb2RiLmNvbScKICAgIGRlZmF1bHQ6ICdodHRw\
Oi8vbG9jYWxob3N0OjgwODAnCiAgICAjZGVmYXVsdDogaHR0cDovL0phc29uc01hY0Jvb2s1NWxv\
Y2FsLmxvY2FsOjg4ODgKICAgICNkZWZhdWx0OiBodHRwOi8vMTkyLjE2OC4wLjE0Ojg4ODgKICAg\
IGRpc3BsYXlfZ3JvdXA6IE1vbmdvREIgT3BzIE1hbmFnZXIgQ29uZmlndXJhdGlvbgogIC0gbmFt\
ZTogbW1zX3VzZXIKICAgIHRpdGxlOiBPcHMgTWFuYWdlciB1c2VyCiAgICB0eXBlOiBzdHJpbmcK\
ICAgIHJlcXVpcmVkOiBUcnVlCiAgICBkZWZhdWx0OiBqYXNvbi5taW1pY2tAbW9uZ29kYi5jb20K\
ICAgIGRpc3BsYXlfZ3JvdXA6IE1vbmdvREIgT3BzIE1hbmFnZXIgQ29uZmlndXJhdGlvbgogIC0g\
bmFtZTogbW1zX3VzZXJfYXBpa2V5CiAgICB0aXRsZTogVXNlcidzIE9wcyBNYW5hZ2VyIEFQSSBr\
ZXkKICAgIHR5cGU6IHN0cmluZwogICAgcmVxdWlyZWQ6IFRydWUKICAgIGRlZmF1bHQ6IDBmNGE3\
MmVlLWQ1YzYtNDcyOS1hZmYwLTgxZmJjYjkzMWY3NQogICAgZGlzcGxheV90eXBlOiBzdHJpbmcK\
ICAgIGRpc3BsYXlfZ3JvdXA6IE1vbmdvREIgT3BzIE1hbmFnZXIgQ29uZmlndXJhdGlvbgogIC0g\
bmFtZTogbW1zX2FwaV91cmkKICAgIHRpdGxlOiBNb25nb0RCIE9wcyBNYW5hZ2VyIEFQSSBVUkkK\
ICAgIGRlZmF1bHQ6ICdodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3B1YmxpYy92MS4wJwogICAg\
dHlwZTogc3RyaW5nCiAgLSBuYW1lOiBtbXNfcHJvamVjdF9uYW1lCiAgICB0aXRsZTogUHJvamVj\
dCB0byBjcmVhdGUgcmVwbGljYSBzZXQgaW4KICAgIGRlZmF1bHQ6ICIiCiAgICB0eXBlOiBzdHJp\
bmcKICAtIG5hbWU6IG1tc19kZWZhdWx0X29yZ0lkCiAgICB0aXRsZTogT3JnYW5pemF0aW9uIGZv\
ciBuZXcgcHJvamVjdAogICAgZGVmYXVsdDogIjVhOTM2MmQ2NmNlZjQ3MGMzNzVhOTg1NSIKICAg\
IHR5cGU6IHN0cmluZwogIC0gbmFtZTogbW1zX2FwaV90aW1lb3V0CiAgICB0aXRsZTogTW9uZ29E\
QiBPcHMgTWFuYWdlciBBUEkgVGltZW91dCBpbiBzZWNvbmRzCiAgICBkZWZhdWx0OiAiMzAiCiAg\
ICB0eXBlOiBzdHJpbmcKCl9jbHVzdGVySW5mbzogJl9jbHVzdGVySW5mbwogIC0gbmFtZTogY2x1\
c3Rlcl9uYW1lCiAgICB0aXRsZTogTW9uZ29EQiBDbHVzdGVyIE5hbWUKICAgIHR5cGU6IHN0cmlu\
ZwogICAgZGVmYXVsdDogCiAgICByZXF1aXJlZDogVHJ1ZQogIC0gbmFtZTogbW9uZ29kYl92ZXJz\
aW9uCiAgICB0aXRsZTogTW9uZ29EQiBWZXJzaW9uCiAgICB0eXBlOiBlbnVtCiAgICBkZWZhdWx0\
OiAnMy40LjEzJwogICAgZW51bTogWyAnMy40LjEzJywgJzMuNi4zJyBdCiAgICByZXF1aXJlZDog\
VHJ1ZQogIC0gbmFtZTogbW9uZ29kYl9wb3J0IAogICAgdGl0bGU6IFBvcnQgZm9yIE1vbmdvREIg\
dG8gbGlzdGVuIG9uCiAgICB0eXBlOiBzdHJpbmcKICAgIGRlZmF1bHQ6ICIyNzAwMCIKICAgIHJl\
cXVpcmVkOiBUcnVlCiAgLSBuYW1lOiBkaXNrX3NpemVfZ2IKICAgIHRpdGxlOiBTaXplIGluIEdi\
IGZvciBwZXJzaXN0ZW50IHN0b3JhZ2UgY2xhaW0gb24gZGF0YSBub2RlCiAgICBkZWZhdWx0OiAi\
NSIKICAgIHR5cGU6IHN0cmluZwoKX3JlcGxTZXRJbmZvOiAmX3JlcGxTZXRJbmZvCiAgLSBuYW1l\
OiBub2Rlc19wZXJfcmVwbGljYXNldAogICAgdGl0bGU6IE51bWJlciBvZiBub2RlcyBpbiBSZXBs\
aWNhIFNldAogICAgdHlwZTogc3RyaW5nIAogICAgZGVmYXVsdDogIjMiCiAgICByZXF1aXJlZDog\
VHJ1ZQoKX2FnZW50c09ubHlJbmZvOiAmX2FnZW50c09ubHlJbmZvCiAgIC0gbmFtZTogbnVtYmVy\
X29mX2FnZW50c19vbmx5X3BvZHMKICAgICB0aXRsZTogTnVtYmVyIG9mIGFnZW50cy1vbmx5IHBv\
ZHMKICAgICB0eXBlOiBzdHJpbmcKICAgICBkZWZhdWx0OiAiMTMiCiAgICAgcmVxdWlyZWQ6IFRy\
dWUKCl9yZXBsaWNhc2V0OiAmX3JlcGxpY2FzZXQKICA8PDogKl9vcHNNZ3JJbmZvCiAgPDw6ICpf\
Y2x1c3RlckluZm8KICA8PDogKl9yZXBsU2V0SW5mbwoKX2FnZW50c29ubHk6ICZfYWdlbnRzb25s\
eQogIDw8OiAqX29wc01nckluZm8KICA8PDogKl9jbHVzdGVySW5mbwogIDw8OiAqX2FnZW50c09u\
bHlJbmZvCgoKdmVyc2lvbjogMC4xCm5hbWU6IG1vbmdvZGItZW50ZXJwcmlzZQpkZXNjcmlwdGlv\
bjogRGVwbG95IE1vbmdvREIgaW50byBPcGVuc2hpZnQgdGhyb3VnaCBPcHMgTWFuYWdlcgpiaW5k\
YWJsZTogVHJ1ZQphc3luYzogb3B0aW9uYWwKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IE1vbmdv\
REIgRW50ZXJwcmlzZQogIGRlcGVuZGVuY2llczogWyAnY2VudG9zJyBdCiAgaW1hZ2VVcmw6IGh0\
dHBzOi8vd3d3Lm1vbmdvZGIuY29tL2Fzc2V0cy9pbWFnZXMvY2xvdWQvYXRsYXMvaWxsdXN0cmF0\
aW9ucy9saXZlLWltcG9ydC5wbmcKICBkb2N1bWVudGF0aW9uVXJsOiBodHRwczovL2dpdGh1Yi5j\
b20vamFzb25taW1pY2svbW9uZ29kYi1vcGVuc2hpZnQtZGV2LXByZXZpZXcKcGxhbnM6CiAgLSBu\
YW1lOiByZXBsaWNhc2V0CiAgICBkZXNjcmlwdGlvbjogVGhpcyBwbGFuIGRlcGxveXMgYSBNb25n\
b0RCIHJlcGxpY2Egc2V0CiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YTogCiAgICAgZGlzcGxh\
eU5hbWU6IE1vbmdvREIgUmVwbGljYSBTZXQKICAgICBsb25nRGVzY3JpcHRpb246IFRoaXMgcGxh\
biBkZXBsb3lzIGEgTW9uZ29EQiByZXBsaWNhCiAgICAgY29zdDogJDAuMDAKICAgIHBhcmFtZXRl\
cnM6ICpfcmVwbGljYXNldAogIC0gbmFtZTogYWdlbnQtb25seQogICAgZGVzY3JpcHRpb246IERl\
cGxveXMgbi1wb2RzIHdpdGggb25seSB0aGUgYWdlbnRzCiAgICBmcmVlOiBUcnVlCiAgICBtZXRh\
ZGF0YToKICAgICAgZGVzY3JpcHRpb246IE1vbmdvREIgQWdlbnRzLU9ubHkKICAgICAgbG9uZ0Rl\
c2NyaXB0aW9uOiBUaGlzIHBsYW4gZGVwbG95cyBzb21lIG51bWJlciBvZiBwb2RzIGVhY2ggd2l0\
aCBvbmx5IDEgb2YgZWFjaCB0eXBlIG9mIE1vbmdvREIgT3BzIE1hbmFnZXIgYWdlbnQuIE5vIGFj\
dHVhbCBNb25nb0RCIGluc3RhbmNlcyBhcmUgcHJvdmlzaW9uZWQuIEVhY2ggYWdlbnQgaXMgYXNz\
b2NpYXRlZCB3aXRoIHRoZSBkZXNpcmVkIHByb2plY3QuIFRoaXMgYmFzZSBwb3MgYWxsb3dzIHVz\
ZXJzIHRvIGNvbmZpZ3VyZSBtb3JlIGFkdmFuY2VkIGNsdXN0ZXJzIGRpcmVjdGx5IHRocm91Z2gg\
TW9uZ29EQiBPcHMgTWFuYWdlci4KICAgICAgY29zdDogJDEsMDAwLDAwMFVTCiAgICBwYXJhbWV0\
ZXJzOiAqX2FnZW50c29ubHkKCg=="

































COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY library /opt/ansible/library
RUN chmod -R g=u /opt/{ansible,apb}
ENV ANSIBLE_LIBRARY /opt/ansible/library
ENV ANSIBLE_ROLES_PATH /opt/ansible/roles:/etc/ansible/roles
USER apb
