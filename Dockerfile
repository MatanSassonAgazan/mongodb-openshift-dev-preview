FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"YWdlbnRzb25seTogJmFnZW50c29ubHkKICAtIG5hbWU6IG1tc19iYXNlX3VybAogICAgdGl0bGU6\
IE9wcyBNYW5hZ2VyIFVSTAogICAgdHlwZTogc3RyaW5nCiAgICByZXF1aXJlZDogVHJ1ZQogICAg\
I2RlZmF1bHQ6ICdodHRwOi8vamFzb25zbWFjYm9vazU1Lmxhbjo4MDgwJwogICAgZGVmYXVsdDog\
J2phc29uc21hY2Jvb2s1NWxvY2FsLmxvY2FsJwogICAgZGlzcGxheV9ncm91cDogTW9uZ29EQiBP\
cHMgTWFuYWdlciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBtbXNfdXNlcgogICAgdGl0bGU6IE9w\
cyBNYW5hZ2VyIHVzZXIKICAgIHR5cGU6IHN0cmluZwogICAgcmVxdWlyZWQ6IFRydWUKICAgIGRl\
ZmF1bHQ6IGphc29uLm1pbWlja0Btb25nb2RiLmNvbQogICAgZGlzcGxheV9ncm91cDogTW9uZ29E\
QiBPcHMgTWFuYWdlciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBtbXNfdXNlcl9hcGlrZXkKICAg\
IHRpdGxlOiBVc2VyJ3MgT3BzIE1hbmFnZXIgQVBJIGtleQogICAgdHlwZTogc3RyaW5nCiAgICBy\
ZXF1aXJlZDogVHJ1ZQogICAgZGVmYXVsdDogMGY0YTcyZWUtZDVjNi00NzI5LWFmZjAtODFmYmNi\
OTMxZjc1CiAgICBkaXNwbGF5X3R5cGU6IHN0cmluZwogICAgZGlzcGxheV9ncm91cDogTW9uZ29E\
QiBPcHMgTWFuYWdlciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBtbXNfcHJvamVjdF9uYW1lCiAg\
ICB0aXRsZTogUHJvamVjdCB0byBjcmVhdGUgcmVwbGljYSBzZXQgaW4KICAgIGRlZmF1bHQ6ICIi\
CiAgICB0eXBlOiBzdHJpbmcKICAgIGRpc3BsYXlfZ3JvdXA6IE1vbmdvREIgT3BzIE1hbmFnZXIg\
Q29uZmlndXJhdGlvbgogIC0gbmFtZTogbW1zX2RlZmF1bHRfb3JnSWQKICAgIHRpdGxlOiBPcmdh\
bml6YXRpb24gZm9yIG5ldyBwcm9qZWN0CiAgICBkZWZhdWx0OiAiNWE5MzYyZDY2Y2VmNDcwYzM3\
NWE5ODU1IgogICAgdHlwZTogc3RyaW5nCiAgICBkaXNwbGF5X2dyb3VwOiBNb25nb0RCIE9wcyBN\
YW5hZ2VyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG1tc19hcGlfdGltZW91dAogICAgdGl0bGU6\
IE1vbmdvREIgT3BzIE1hbmFnZXIgQVBJIFRpbWVvdXQgaW4gc2Vjb25kcwogICAgZGVmYXVsdDog\
IjMwIgogICAgdHlwZTogc3RyaW5nCiAgICBkaXNwbGF5X2dyb3VwOiBNb25nb0RCIE9wcyBNYW5h\
Z2VyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IGNsdXN0ZXJfbmFtZQogICAgdGl0bGU6IE1vbmdv\
REIgQ2x1c3RlciBOYW1lCiAgICB0eXBlOiBzdHJpbmcKICAgIGRlZmF1bHQ6IAogICAgcmVxdWly\
ZWQ6IFRydWUKICAgIGRpc3BsYXlfZ3JvdXA6IE1vbmdvREIgQ2x1c3RlciBDb25maWd1cmF0aW9u\
CiAgLSBuYW1lOiBtb25nb2RiX3ZlcnNpb24KICAgIHRpdGxlOiBNb25nb0RCIFZlcnNpb24KICAg\
IHR5cGU6IGVudW0KICAgIGRlZmF1bHQ6ICczLjQuMTMnCiAgICBlbnVtOiBbICczLjQuMTMnLCAn\
My42LjMnIF0KICAgIHJlcXVpcmVkOiBUcnVlCiAgICBkaXNwbGF5X2dyb3VwOiBNb25nb0RCIENs\
dXN0ZXIgQ29uZmlndXJhdGlvbgogIC0gbmFtZTogbW9uZ29kYl9wb3J0IAogICAgdGl0bGU6IFBv\
cnQgZm9yIE1vbmdvREIgdG8gbGlzdGVuIG9uCiAgICB0eXBlOiBzdHJpbmcKICAgIGRlZmF1bHQ6\
ICIyNzAwMCIKICAgIHJlcXVpcmVkOiBUcnVlCiAgICBkaXNwbGF5X2dyb3VwOiBNb25nb0RCIENs\
dXN0ZXIgQ29uZmlndXJhdGlvbgogIC0gbmFtZTogZGlza19zaXplX2diCiAgICB0aXRsZTogU2l6\
ZSBpbiBHYiBmb3IgcGVyc2lzdGVudCBzdG9yYWdlIGNsYWltIG9uIGRhdGEgbm9kZQogICAgZGVm\
YXVsdDogIjUiCiAgICB0eXBlOiBzdHJpbmcKICAgIGRpc3BsYXlfZ3JvdXA6IE1vbmdvREIgQ2x1\
c3RlciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBudW1iZXJfcG9kc19hYQogICAgdGl0bGU6IE51\
bWJlciBvZiBhZ2VudHMtb25seSBwb2RzCiAgICB0eXBlOiBzdHJpbmcKICAgIGRlZmF1bHQ6ICIx\
MyIKICAgIHJlcXVpcmVkOiBUcnVlCiAgICBkaXNwbGF5X2dyb3VwOiBNb25nb0RCIEFnZW50cyBP\
bmx5IFBvZHMgQ29uZmlndXJhdGlvbgoKcmVwbGljYXNldDogJnJlcGxpY2FzZXQKICAtIG5hbWU6\
IG1tc19iYXNlX3VybAogICAgdGl0bGU6IE9wcyBNYW5hZ2VyIFVSTAogICAgdHlwZTogc3RyaW5n\
CiAgICByZXF1aXJlZDogVHJ1ZQogICAgZGVmYXVsdDogJ2h0dHA6Ly9qYXNvbnNtYWNib29rNTVs\
b2NhbC5sb2NhbDo4MDgwJwogICAgZGlzcGxheV9ncm91cDogTW9uZ29EQiBPcHMgTWFuYWdlciBD\
b25maWd1cmF0aW9uCiAgLSBuYW1lOiBtbXNfdXNlcgogICAgdGl0bGU6IE9wcyBNYW5hZ2VyIHVz\
ZXIKICAgIHR5cGU6IHN0cmluZwogICAgcmVxdWlyZWQ6IFRydWUKICAgIGRlZmF1bHQ6IGphc29u\
Lm1pbWlja0Btb25nb2RiLmNvbQogICAgZGlzcGxheV9ncm91cDogTW9uZ29EQiBPcHMgTWFuYWdl\
ciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBtbXNfdXNlcl9hcGlrZXkKICAgIHRpdGxlOiBVc2Vy\
J3MgT3BzIE1hbmFnZXIgQVBJIGtleQogICAgdHlwZTogc3RyaW5nCiAgICByZXF1aXJlZDogVHJ1\
ZQogICAgZGVmYXVsdDogMGY0YTcyZWUtZDVjNi00NzI5LWFmZjAtODFmYmNiOTMxZjc1CiAgICBk\
aXNwbGF5X3R5cGU6IHN0cmluZwogICAgZGlzcGxheV9ncm91cDogTW9uZ29EQiBPcHMgTWFuYWdl\
ciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBtbXNfcHJvamVjdF9uYW1lCiAgICB0aXRsZTogUHJv\
amVjdCB0byBjcmVhdGUgcmVwbGljYSBzZXQgaW4KICAgIGRlZmF1bHQ6ICIiCiAgICB0eXBlOiBz\
dHJpbmcKICAtIG5hbWU6IG1tc19kZWZhdWx0X29yZ0lkCiAgICB0aXRsZTogT3JnYW5pemF0aW9u\
IGZvciBuZXcgcHJvamVjdAogICAgZGVmYXVsdDogIjVhOTM2MmQ2NmNlZjQ3MGMzNzVhOTg1NSIK\
ICAgIHR5cGU6IHN0cmluZwogICAgZGlzcGxheV9ncm91cDogTW9uZ29EQiBPcHMgTWFuYWdlciBD\
b25maWd1cmF0aW9uCiAgLSBuYW1lOiBtbXNfYXBpX3RpbWVvdXQKICAgIHRpdGxlOiBNb25nb0RC\
IE9wcyBNYW5hZ2VyIEFQSSBUaW1lb3V0IGluIHNlY29uZHMKICAgIGRlZmF1bHQ6ICIzMCIKICAg\
IHR5cGU6IHN0cmluZwogICAgZGlzcGxheV9ncm91cDogTW9uZ29EQiBPcHMgTWFuYWdlciBDb25m\
aWd1cmF0aW9uCiAgLSBuYW1lOiBjbHVzdGVyX25hbWUKICAgIHRpdGxlOiBNb25nb0RCIENsdXN0\
ZXIgTmFtZQogICAgdHlwZTogc3RyaW5nCiAgICBkZWZhdWx0OiAKICAgIHJlcXVpcmVkOiBUcnVl\
CiAgICBkaXNwbGF5X2dyb3VwOiBNb25nb0RCIENsdXN0ZXIgQ29uZmlndXJhdGlvbgogIC0gbmFt\
ZTogbW9uZ29kYl92ZXJzaW9uCiAgICB0aXRsZTogTW9uZ29EQiBWZXJzaW9uCiAgICB0eXBlOiBl\
bnVtCiAgICBkZWZhdWx0OiAnMy40LjEzJwogICAgZW51bTogWyAnMy40LjEzJywgJzMuNi4zJyBd\
CiAgICByZXF1aXJlZDogVHJ1ZQogICAgZGlzcGxheV9ncm91cDogTW9uZ29EQiBDbHVzdGVyIENv\
bmZpZ3VyYXRpb24KICAtIG5hbWU6IG1vbmdvZGJfcG9ydCAKICAgIHRpdGxlOiBQb3J0IGZvciBN\
b25nb0RCIHRvIGxpc3RlbiBvbgogICAgdHlwZTogc3RyaW5nCiAgICBkZWZhdWx0OiAiMjcwMDAi\
CiAgICByZXF1aXJlZDogVHJ1ZQogICAgZGlzcGxheV9ncm91cDogTW9uZ29EQiBDbHVzdGVyIENv\
bmZpZ3VyYXRpb24KICAtIG5hbWU6IGRpc2tfc2l6ZV9nYgogICAgdGl0bGU6IFNpemUgaW4gR2Ig\
Zm9yIHBlcnNpc3RlbnQgc3RvcmFnZSBjbGFpbSBvbiBkYXRhIG5vZGUKICAgIGRlZmF1bHQ6ICI1\
IgogICAgdHlwZTogc3RyaW5nCiAgICBkaXNwbGF5X2dyb3VwOiBNb25nb0RCIENsdXN0ZXIgQ29u\
ZmlndXJhdGlvbgogIC0gbmFtZTogbnVtYmVyX3BvZHNfcnMKICAgIHRpdGxlOiBOdW1iZXIgb2Yg\
bm9kZXMgaW4gUmVwbGljYSBTZXQKICAgIHR5cGU6IHN0cmluZyAKICAgIGRlZmF1bHQ6ICIzIgog\
ICAgcmVxdWlyZWQ6IFRydWUKICAgIGRpc3BsYXlfZ3JvdXA6IE1vbmdvREIgUmVwbGljYSBTZXQg\
Q29uZmlndXJhdGlvbgoKCgp2ZXJzaW9uOiAwLjEKbmFtZTogbW9uZ29kYi1lbnRlcnByaXNlCmRl\
c2NyaXB0aW9uOiBEZXBsb3kgTW9uZ29EQiBpbnRvIE9wZW5zaGlmdCB0aHJvdWdoIE9wcyBNYW5h\
Z2VyCmJpbmRhYmxlOiBUcnVlCmFzeW5jOiBvcHRpb25hbAptZXRhZGF0YToKICBkaXNwbGF5TmFt\
ZTogTW9uZ29EQiBFbnRlcnByaXNlCiAgZGVwZW5kZW5jaWVzOiBbICdjZW50b3MnIF0KICBpbWFn\
ZVVybDogaHR0cHM6Ly93d3cubW9uZ29kYi5jb20vYXNzZXRzL2ltYWdlcy9jbG91ZC9hdGxhcy9p\
bGx1c3RyYXRpb25zL2xpdmUtaW1wb3J0LnBuZwogIGRvY3VtZW50YXRpb25Vcmw6IGh0dHBzOi8v\
Z2l0aHViLmNvbS9qYXNvbm1pbWljay9tb25nb2RiLW9wZW5zaGlmdC1kZXYtcHJldmlldwpwbGFu\
czoKICAtIG5hbWU6IHJlcGxpY2FzZXQKICAgIGRlc2NyaXB0aW9uOiBUaGlzIHBsYW4gZGVwbG95\
cyBhIE1vbmdvREIgcmVwbGljYSBzZXQKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOiAKICAg\
ICBkaXNwbGF5TmFtZTogTW9uZ29EQiBSZXBsaWNhIFNldAogICAgIGxvbmdEZXNjcmlwdGlvbjog\
VGhpcyBwbGFuIGRlcGxveXMgYSBNb25nb0RCIHJlcGxpY2EKICAgICBjb3N0OiAkMC4wMAogICAg\
cGFyYW1ldGVyczogKnJlcGxpY2FzZXQKICAtIG5hbWU6IGFnZW50LW9ubHkKICAgIGRlc2NyaXB0\
aW9uOiBEZXBsb3lzIG4tcG9kcyB3aXRoIG9ubHkgdGhlIGFnZW50cwogICAgZnJlZTogVHJ1ZQog\
ICAgbWV0YWRhdGE6CiAgICAgIGRlc2NyaXB0aW9uOiBNb25nb0RCIEFnZW50cy1Pbmx5CiAgICAg\
IGxvbmdEZXNjcmlwdGlvbjogVGhpcyBwbGFuIGRlcGxveXMgc29tZSBudW1iZXIgb2YgcG9kcyBl\
YWNoIHdpdGggb25seSAxIG9mIGVhY2ggdHlwZSBvZiBNb25nb0RCIE9wcyBNYW5hZ2VyIGFnZW50\
LiBObyBhY3R1YWwgTW9uZ29EQiBpbnN0YW5jZXMgYXJlIHByb3Zpc2lvbmVkLiBFYWNoIGFnZW50\
IGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGVzaXJlZCBwcm9qZWN0LiBUaGlzIGJhc2UgcG9zIGFs\
bG93cyB1c2VycyB0byBjb25maWd1cmUgbW9yZSBhZHZhbmNlZCBjbHVzdGVycyBkaXJlY3RseSB0\
aHJvdWdoIE1vbmdvREIgT3BzIE1hbmFnZXIuCiAgICAgIGNvc3Q6ICQxLDAwMCwwMDBVUwogICAg\
cGFyYW1ldGVyczogKmFnZW50c29ubHkKCg=="






























COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY library /opt/ansible/library
RUN chmod -R g=u /opt/{ansible,apb}
ENV ANSIBLE_LIBRARY /opt/ansible/library
ENV ANSIBLE_ROLES_PATH /opt/ansible/roles:/etc/ansible/roles
USER apb
