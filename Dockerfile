FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"YWdlbnRzb25seTogJmFnZW50c29ubHkKICAtIG5hbWU6IG1tc19iYXNlX3VybAogICAgdGl0bGU6\
IE9wcyBNYW5hZ2VyIFVSTAogICAgdHlwZTogc3RyaW5nCiAgICByZXF1aXJlZDogVHJ1ZQogICAg\
ZGVmYXVsdDogJ2h0dHA6Ly9qYXNvbnNtYWNib29rNTUubGFuOjgwODAnCiAgICBkaXNwbGF5X2dy\
b3VwOiBNb25nb0RCIE9wcyBNYW5hZ2VyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG1tc191c2Vy\
CiAgICB0aXRsZTogT3BzIE1hbmFnZXIgdXNlcgogICAgdHlwZTogc3RyaW5nCiAgICByZXF1aXJl\
ZDogVHJ1ZQogICAgZGVmYXVsdDogamFzb24ubWltaWNrQG1vbmdvZGIuY29tCiAgICBkaXNwbGF5\
X2dyb3VwOiBNb25nb0RCIE9wcyBNYW5hZ2VyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG1tc191\
c2VyX2FwaWtleQogICAgdGl0bGU6IFVzZXIncyBPcHMgTWFuYWdlciBBUEkga2V5CiAgICB0eXBl\
OiBzdHJpbmcKICAgIHJlcXVpcmVkOiBUcnVlCiAgICBkZWZhdWx0OiAwZjRhNzJlZS1kNWM2LTQ3\
MjktYWZmMC04MWZiY2I5MzFmNzUKICAgIGRpc3BsYXlfdHlwZTogc3RyaW5nCiAgICBkaXNwbGF5\
X2dyb3VwOiBNb25nb0RCIE9wcyBNYW5hZ2VyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG1tc19h\
cGlfdXJpCiAgICB0aXRsZTogTW9uZ29EQiBPcHMgTWFuYWdlciBBUEkgVVJJCiAgICBkZWZhdWx0\
OiAnaHR0cDovL2phc29uc21hY2Jvb2s1NS5sYW46ODA4MC9hcGkvcHVibGljL3YxLjAnCiAgICB0\
eXBlOiBzdHJpbmcKICAtIG5hbWU6IG1tc19wcm9qZWN0X25hbWUKICAgIHRpdGxlOiBQcm9qZWN0\
IHRvIGNyZWF0ZSByZXBsaWNhIHNldCBpbgogICAgZGVmYXVsdDogIiIKICAgIHR5cGU6IHN0cmlu\
ZwogIC0gbmFtZTogbW1zX2RlZmF1bHRfb3JnSWQKICAgIHRpdGxlOiBPcmdhbml6YXRpb24gZm9y\
IG5ldyBwcm9qZWN0CiAgICBkZWZhdWx0OiAiNWE5MzYyZDY2Y2VmNDcwYzM3NWE5ODU1IgogICAg\
dHlwZTogc3RyaW5nCiAgLSBuYW1lOiBtbXNfYXBpX3RpbWVvdXQKICAgIHRpdGxlOiBNb25nb0RC\
IE9wcyBNYW5hZ2VyIEFQSSBUaW1lb3V0IGluIHNlY29uZHMKICAgIGRlZmF1bHQ6ICIzMCIKICAg\
IHR5cGU6IHN0cmluZwogIC0gbmFtZTogY2x1c3Rlcl9uYW1lCiAgICB0aXRsZTogTW9uZ29EQiBD\
bHVzdGVyIE5hbWUKICAgIHR5cGU6IHN0cmluZwogICAgZGVmYXVsdDogCiAgICByZXF1aXJlZDog\
VHJ1ZQogICAgZGlzcGxheV9ncm91cDogTW9uZ29EQiBDbHVzdGVyIENvbmZpZ3VyYXRpb24KICAt\
IG5hbWU6IG1vbmdvZGJfdmVyc2lvbgogICAgdGl0bGU6IE1vbmdvREIgVmVyc2lvbgogICAgdHlw\
ZTogZW51bQogICAgZGVmYXVsdDogJzMuNC4xMycKICAgIGVudW06IFsgJzMuNC4xMycsICczLjYu\
MycgXQogICAgcmVxdWlyZWQ6IFRydWUKICAgIGRpc3BsYXlfZ3JvdXA6IE1vbmdvREIgQ2x1c3Rl\
ciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBtb25nb2RiX3BvcnQgCiAgICB0aXRsZTogUG9ydCBm\
b3IgTW9uZ29EQiB0byBsaXN0ZW4gb24KICAgIHR5cGU6IHN0cmluZwogICAgZGVmYXVsdDogIjI3\
MDAwIgogICAgcmVxdWlyZWQ6IFRydWUKICAgIGRpc3BsYXlfZ3JvdXA6IE1vbmdvREIgQ2x1c3Rl\
ciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBkaXNrX3NpemVfZ2IKICAgIHRpdGxlOiBTaXplIGlu\
IEdiIGZvciBwZXJzaXN0ZW50IHN0b3JhZ2UgY2xhaW0gb24gZGF0YSBub2RlCiAgICBkZWZhdWx0\
OiAiNSIKICAgIHR5cGU6IHN0cmluZwogICAgZGlzcGxheV9ncm91cDogTW9uZ29EQiBDbHVzdGVy\
IENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG51bWJlcl9wb2RzX2FhCiAgICB0aXRsZTogTnVtYmVy\
IG9mIGFnZW50cy1vbmx5IHBvZHMKICAgIHR5cGU6IHN0cmluZwogICAgZGVmYXVsdDogIjEzIgog\
ICAgcmVxdWlyZWQ6IFRydWUKICAgIGRpc3BsYXlfZ3JvdXA6IE1vbmdvREIgQWdlbnRzIE9ubHkg\
UG9kcyBDb25maWd1cmF0aW9uCgpyZXBsaWNhc2V0OiAmcmVwbGljYXNldAogIC0gbmFtZTogbW1z\
X2Jhc2VfdXJsCiAgICB0aXRsZTogT3BzIE1hbmFnZXIgVVJMCiAgICB0eXBlOiBzdHJpbmcKICAg\
IHJlcXVpcmVkOiBUcnVlCiAgICBkZWZhdWx0OiAnaHR0cDovL2phc29uc21hY2Jvb2s1NS5sYW46\
ODA4MCcKICAgIGRpc3BsYXlfZ3JvdXA6IE1vbmdvREIgT3BzIE1hbmFnZXIgQ29uZmlndXJhdGlv\
bgogIC0gbmFtZTogbW1zX3VzZXIKICAgIHRpdGxlOiBPcHMgTWFuYWdlciB1c2VyCiAgICB0eXBl\
OiBzdHJpbmcKICAgIHJlcXVpcmVkOiBUcnVlCiAgICBkZWZhdWx0OiBqYXNvbi5taW1pY2tAbW9u\
Z29kYi5jb20KICAgIGRpc3BsYXlfZ3JvdXA6IE1vbmdvREIgT3BzIE1hbmFnZXIgQ29uZmlndXJh\
dGlvbgogIC0gbmFtZTogbW1zX3VzZXJfYXBpa2V5CiAgICB0aXRsZTogVXNlcidzIE9wcyBNYW5h\
Z2VyIEFQSSBrZXkKICAgIHR5cGU6IHN0cmluZwogICAgcmVxdWlyZWQ6IFRydWUKICAgIGRlZmF1\
bHQ6IDBmNGE3MmVlLWQ1YzYtNDcyOS1hZmYwLTgxZmJjYjkzMWY3NQogICAgZGlzcGxheV90eXBl\
OiBzdHJpbmcKICAgIGRpc3BsYXlfZ3JvdXA6IE1vbmdvREIgT3BzIE1hbmFnZXIgQ29uZmlndXJh\
dGlvbgogIC0gbmFtZTogbW1zX2FwaV91cmkKICAgIHRpdGxlOiBNb25nb0RCIE9wcyBNYW5hZ2Vy\
IEFQSSBVUkkKICAgIGRlZmF1bHQ6ICdodHRwOi8vamFzb25zbWFjYm9vazU1Lmxhbjo4MDgwL2Fw\
aS9wdWJsaWMvdjEuMCcKICAgIHR5cGU6IHN0cmluZwogIC0gbmFtZTogbW1zX3Byb2plY3RfbmFt\
ZQogICAgdGl0bGU6IFByb2plY3QgdG8gY3JlYXRlIHJlcGxpY2Egc2V0IGluCiAgICBkZWZhdWx0\
OiAiIgogICAgdHlwZTogc3RyaW5nCiAgLSBuYW1lOiBtbXNfZGVmYXVsdF9vcmdJZAogICAgdGl0\
bGU6IE9yZ2FuaXphdGlvbiBmb3IgbmV3IHByb2plY3QKICAgIGRlZmF1bHQ6ICI1YTkzNjJkNjZj\
ZWY0NzBjMzc1YTk4NTUiCiAgICB0eXBlOiBzdHJpbmcKICAtIG5hbWU6IG1tc19hcGlfdGltZW91\
dAogICAgdGl0bGU6IE1vbmdvREIgT3BzIE1hbmFnZXIgQVBJIFRpbWVvdXQgaW4gc2Vjb25kcwog\
ICAgZGVmYXVsdDogIjMwIgogICAgdHlwZTogc3RyaW5nCiAgLSBuYW1lOiBjbHVzdGVyX25hbWUK\
ICAgIHRpdGxlOiBNb25nb0RCIENsdXN0ZXIgTmFtZQogICAgdHlwZTogc3RyaW5nCiAgICBkZWZh\
dWx0OiAKICAgIHJlcXVpcmVkOiBUcnVlCiAgICBkaXNwbGF5X2dyb3VwOiBNb25nb0RCIENsdXN0\
ZXIgQ29uZmlndXJhdGlvbgogIC0gbmFtZTogbW9uZ29kYl92ZXJzaW9uCiAgICB0aXRsZTogTW9u\
Z29EQiBWZXJzaW9uCiAgICB0eXBlOiBlbnVtCiAgICBkZWZhdWx0OiAnMy40LjEzJwogICAgZW51\
bTogWyAnMy40LjEzJywgJzMuNi4zJyBdCiAgICByZXF1aXJlZDogVHJ1ZQogICAgZGlzcGxheV9n\
cm91cDogTW9uZ29EQiBDbHVzdGVyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG1vbmdvZGJfcG9y\
dCAKICAgIHRpdGxlOiBQb3J0IGZvciBNb25nb0RCIHRvIGxpc3RlbiBvbgogICAgdHlwZTogc3Ry\
aW5nCiAgICBkZWZhdWx0OiAiMjcwMDAiCiAgICByZXF1aXJlZDogVHJ1ZQogICAgZGlzcGxheV9n\
cm91cDogTW9uZ29EQiBDbHVzdGVyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IGRpc2tfc2l6ZV9n\
YgogICAgdGl0bGU6IFNpemUgaW4gR2IgZm9yIHBlcnNpc3RlbnQgc3RvcmFnZSBjbGFpbSBvbiBk\
YXRhIG5vZGUKICAgIGRlZmF1bHQ6ICI1IgogICAgdHlwZTogc3RyaW5nCiAgICBkaXNwbGF5X2dy\
b3VwOiBNb25nb0RCIENsdXN0ZXIgQ29uZmlndXJhdGlvbgogIC0gbmFtZTogbnVtYmVyX3BvZHNf\
cnMKICAgIHRpdGxlOiBOdW1iZXIgb2Ygbm9kZXMgaW4gUmVwbGljYSBTZXQKICAgIHR5cGU6IHN0\
cmluZyAKICAgIGRlZmF1bHQ6ICIzIgogICAgcmVxdWlyZWQ6IFRydWUKICAgIGRpc3BsYXlfZ3Jv\
dXA6IE1vbmdvREIgUmVwbGljYSBTZXQgQ29uZmlndXJhdGlvbgoKCgp2ZXJzaW9uOiAwLjEKbmFt\
ZTogbW9uZ29kYi1lbnRlcnByaXNlCmRlc2NyaXB0aW9uOiBEZXBsb3kgTW9uZ29EQiBpbnRvIE9w\
ZW5zaGlmdCB0aHJvdWdoIE9wcyBNYW5hZ2VyCmJpbmRhYmxlOiBUcnVlCmFzeW5jOiBvcHRpb25h\
bAptZXRhZGF0YToKICBkaXNwbGF5TmFtZTogTW9uZ29EQiBFbnRlcnByaXNlCiAgZGVwZW5kZW5j\
aWVzOiBbICdjZW50b3MnIF0KICBpbWFnZVVybDogaHR0cHM6Ly93d3cubW9uZ29kYi5jb20vYXNz\
ZXRzL2ltYWdlcy9jbG91ZC9hdGxhcy9pbGx1c3RyYXRpb25zL2xpdmUtaW1wb3J0LnBuZwogIGRv\
Y3VtZW50YXRpb25Vcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9qYXNvbm1pbWljay9tb25nb2RiLW9w\
ZW5zaGlmdC1kZXYtcHJldmlldwpwbGFuczoKICAtIG5hbWU6IHJlcGxpY2FzZXQKICAgIGRlc2Ny\
aXB0aW9uOiBUaGlzIHBsYW4gZGVwbG95cyBhIE1vbmdvREIgcmVwbGljYSBzZXQKICAgIGZyZWU6\
IFRydWUKICAgIG1ldGFkYXRhOiAKICAgICBkaXNwbGF5TmFtZTogTW9uZ29EQiBSZXBsaWNhIFNl\
dAogICAgIGxvbmdEZXNjcmlwdGlvbjogVGhpcyBwbGFuIGRlcGxveXMgYSBNb25nb0RCIHJlcGxp\
Y2EKICAgICBjb3N0OiAkMC4wMAogICAgcGFyYW1ldGVyczogKnJlcGxpY2FzZXQKICAtIG5hbWU6\
IGFnZW50LW9ubHkKICAgIGRlc2NyaXB0aW9uOiBEZXBsb3lzIG4tcG9kcyB3aXRoIG9ubHkgdGhl\
IGFnZW50cwogICAgZnJlZTogVHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIGRlc2NyaXB0aW9uOiBN\
b25nb0RCIEFnZW50cy1Pbmx5CiAgICAgIGxvbmdEZXNjcmlwdGlvbjogVGhpcyBwbGFuIGRlcGxv\
eXMgc29tZSBudW1iZXIgb2YgcG9kcyBlYWNoIHdpdGggb25seSAxIG9mIGVhY2ggdHlwZSBvZiBN\
b25nb0RCIE9wcyBNYW5hZ2VyIGFnZW50LiBObyBhY3R1YWwgTW9uZ29EQiBpbnN0YW5jZXMgYXJl\
IHByb3Zpc2lvbmVkLiBFYWNoIGFnZW50IGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGVzaXJlZCBw\
cm9qZWN0LiBUaGlzIGJhc2UgcG9zIGFsbG93cyB1c2VycyB0byBjb25maWd1cmUgbW9yZSBhZHZh\
bmNlZCBjbHVzdGVycyBkaXJlY3RseSB0aHJvdWdoIE1vbmdvREIgT3BzIE1hbmFnZXIuCiAgICAg\
IGNvc3Q6ICQxLDAwMCwwMDBVUwogICAgcGFyYW1ldGVyczogKmFnZW50c29ubHkKCg=="






























COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY library /opt/ansible/library
RUN chmod -R g=u /opt/{ansible,apb}
ENV ANSIBLE_LIBRARY /opt/ansible/library
ENV ANSIBLE_ROLES_PATH /opt/ansible/roles:/etc/ansible/roles
USER apb
