FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"YWdlbnRzb25seTogJmFnZW50c29ubHkKICAtIG5hbWU6IG1tc19iYXNlX3VybAogICAgdGl0bGU6\
IE9wcyBNYW5hZ2VyIFVSTAogICAgdHlwZTogc3RyaW5nCiAgICByZXF1aXJlZDogVHJ1ZQogICAg\
I2RlZmF1bHQ6ICdodHRwOi8vamFzb25zbWFjYm9vazU1Lmxhbjo4MDgwJwogICAgZGVmYXVsdDog\
J2phc29uc21hY2Jvb2s1NWxvY2FsLmxvY2FsJwogICAgZGlzcGxheV9ncm91cDogTW9uZ29EQiBP\
cHMgTWFuYWdlciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBtbXNfdXNlcgogICAgdGl0bGU6IE9w\
cyBNYW5hZ2VyIHVzZXIKICAgIHR5cGU6IHN0cmluZwogICAgcmVxdWlyZWQ6IFRydWUKICAgIGRl\
ZmF1bHQ6IGphc29uLm1pbWlja0Btb25nb2RiLmNvbQogICAgZGlzcGxheV9ncm91cDogTW9uZ29E\
QiBPcHMgTWFuYWdlciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBtbXNfdXNlcl9hcGlrZXkKICAg\
IHRpdGxlOiBVc2VyJ3MgT3BzIE1hbmFnZXIgQVBJIGtleQogICAgdHlwZTogc3RyaW5nCiAgICBy\
ZXF1aXJlZDogVHJ1ZQogICAgZGVmYXVsdDogMGY0YTcyZWUtZDVjNi00NzI5LWFmZjAtODFmYmNi\
OTMxZjc1CiAgICBkaXNwbGF5X3R5cGU6IHN0cmluZwogICAgZGlzcGxheV9ncm91cDogTW9uZ29E\
QiBPcHMgTWFuYWdlciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBtbXNfYXBpX3VyaQogICAgdGl0\
bGU6IE1vbmdvREIgT3BzIE1hbmFnZXIgQVBJIFVSSQogICAgZGVmYXVsdDogJ2h0dHA6Ly9qYXNv\
bnNtYWNib29rNTUubGFuOjgwODAvYXBpL3B1YmxpYy92MS4wJwogICAgdHlwZTogc3RyaW5nCiAg\
LSBuYW1lOiBtbXNfcHJvamVjdF9uYW1lCiAgICB0aXRsZTogUHJvamVjdCB0byBjcmVhdGUgcmVw\
bGljYSBzZXQgaW4KICAgIGRlZmF1bHQ6ICIiCiAgICB0eXBlOiBzdHJpbmcKICAtIG5hbWU6IG1t\
c19kZWZhdWx0X29yZ0lkCiAgICB0aXRsZTogT3JnYW5pemF0aW9uIGZvciBuZXcgcHJvamVjdAog\
ICAgZGVmYXVsdDogIjVhOTM2MmQ2NmNlZjQ3MGMzNzVhOTg1NSIKICAgIHR5cGU6IHN0cmluZwog\
IC0gbmFtZTogbW1zX2FwaV90aW1lb3V0CiAgICB0aXRsZTogTW9uZ29EQiBPcHMgTWFuYWdlciBB\
UEkgVGltZW91dCBpbiBzZWNvbmRzCiAgICBkZWZhdWx0OiAiMzAiCiAgICB0eXBlOiBzdHJpbmcK\
ICAtIG5hbWU6IGNsdXN0ZXJfbmFtZQogICAgdGl0bGU6IE1vbmdvREIgQ2x1c3RlciBOYW1lCiAg\
ICB0eXBlOiBzdHJpbmcKICAgIGRlZmF1bHQ6IAogICAgcmVxdWlyZWQ6IFRydWUKICAgIGRpc3Bs\
YXlfZ3JvdXA6IE1vbmdvREIgQ2x1c3RlciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBtb25nb2Ri\
X3ZlcnNpb24KICAgIHRpdGxlOiBNb25nb0RCIFZlcnNpb24KICAgIHR5cGU6IGVudW0KICAgIGRl\
ZmF1bHQ6ICczLjQuMTMnCiAgICBlbnVtOiBbICczLjQuMTMnLCAnMy42LjMnIF0KICAgIHJlcXVp\
cmVkOiBUcnVlCiAgICBkaXNwbGF5X2dyb3VwOiBNb25nb0RCIENsdXN0ZXIgQ29uZmlndXJhdGlv\
bgogIC0gbmFtZTogbW9uZ29kYl9wb3J0IAogICAgdGl0bGU6IFBvcnQgZm9yIE1vbmdvREIgdG8g\
bGlzdGVuIG9uCiAgICB0eXBlOiBzdHJpbmcKICAgIGRlZmF1bHQ6ICIyNzAwMCIKICAgIHJlcXVp\
cmVkOiBUcnVlCiAgICBkaXNwbGF5X2dyb3VwOiBNb25nb0RCIENsdXN0ZXIgQ29uZmlndXJhdGlv\
bgogIC0gbmFtZTogZGlza19zaXplX2diCiAgICB0aXRsZTogU2l6ZSBpbiBHYiBmb3IgcGVyc2lz\
dGVudCBzdG9yYWdlIGNsYWltIG9uIGRhdGEgbm9kZQogICAgZGVmYXVsdDogIjUiCiAgICB0eXBl\
OiBzdHJpbmcKICAgIGRpc3BsYXlfZ3JvdXA6IE1vbmdvREIgQ2x1c3RlciBDb25maWd1cmF0aW9u\
CiAgLSBuYW1lOiBudW1iZXJfcG9kc19hYQogICAgdGl0bGU6IE51bWJlciBvZiBhZ2VudHMtb25s\
eSBwb2RzCiAgICB0eXBlOiBzdHJpbmcKICAgIGRlZmF1bHQ6ICIxMyIKICAgIHJlcXVpcmVkOiBU\
cnVlCiAgICBkaXNwbGF5X2dyb3VwOiBNb25nb0RCIEFnZW50cyBPbmx5IFBvZHMgQ29uZmlndXJh\
dGlvbgoKcmVwbGljYXNldDogJnJlcGxpY2FzZXQKICAtIG5hbWU6IG1tc19iYXNlX3VybAogICAg\
dGl0bGU6IE9wcyBNYW5hZ2VyIFVSTAogICAgdHlwZTogc3RyaW5nCiAgICByZXF1aXJlZDogVHJ1\
ZQogICAgZGVmYXVsdDogJ2h0dHA6Ly9qYXNvbnNtYWNib29rNTUubGFuOjgwODAnCiAgICBkaXNw\
bGF5X2dyb3VwOiBNb25nb0RCIE9wcyBNYW5hZ2VyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG1t\
c191c2VyCiAgICB0aXRsZTogT3BzIE1hbmFnZXIgdXNlcgogICAgdHlwZTogc3RyaW5nCiAgICBy\
ZXF1aXJlZDogVHJ1ZQogICAgZGVmYXVsdDogamFzb24ubWltaWNrQG1vbmdvZGIuY29tCiAgICBk\
aXNwbGF5X2dyb3VwOiBNb25nb0RCIE9wcyBNYW5hZ2VyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6\
IG1tc191c2VyX2FwaWtleQogICAgdGl0bGU6IFVzZXIncyBPcHMgTWFuYWdlciBBUEkga2V5CiAg\
ICB0eXBlOiBzdHJpbmcKICAgIHJlcXVpcmVkOiBUcnVlCiAgICBkZWZhdWx0OiAwZjRhNzJlZS1k\
NWM2LTQ3MjktYWZmMC04MWZiY2I5MzFmNzUKICAgIGRpc3BsYXlfdHlwZTogc3RyaW5nCiAgICBk\
aXNwbGF5X2dyb3VwOiBNb25nb0RCIE9wcyBNYW5hZ2VyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6\
IG1tc19hcGlfdXJpCiAgICB0aXRsZTogTW9uZ29EQiBPcHMgTWFuYWdlciBBUEkgVVJJCiAgICBk\
ZWZhdWx0OiAnaHR0cDovL2phc29uc21hY2Jvb2s1NS5sYW46ODA4MC9hcGkvcHVibGljL3YxLjAn\
CiAgICB0eXBlOiBzdHJpbmcKICAtIG5hbWU6IG1tc19wcm9qZWN0X25hbWUKICAgIHRpdGxlOiBQ\
cm9qZWN0IHRvIGNyZWF0ZSByZXBsaWNhIHNldCBpbgogICAgZGVmYXVsdDogIiIKICAgIHR5cGU6\
IHN0cmluZwogIC0gbmFtZTogbW1zX2RlZmF1bHRfb3JnSWQKICAgIHRpdGxlOiBPcmdhbml6YXRp\
b24gZm9yIG5ldyBwcm9qZWN0CiAgICBkZWZhdWx0OiAiNWE5MzYyZDY2Y2VmNDcwYzM3NWE5ODU1\
IgogICAgdHlwZTogc3RyaW5nCiAgLSBuYW1lOiBtbXNfYXBpX3RpbWVvdXQKICAgIHRpdGxlOiBN\
b25nb0RCIE9wcyBNYW5hZ2VyIEFQSSBUaW1lb3V0IGluIHNlY29uZHMKICAgIGRlZmF1bHQ6ICIz\
MCIKICAgIHR5cGU6IHN0cmluZwogIC0gbmFtZTogY2x1c3Rlcl9uYW1lCiAgICB0aXRsZTogTW9u\
Z29EQiBDbHVzdGVyIE5hbWUKICAgIHR5cGU6IHN0cmluZwogICAgZGVmYXVsdDogCiAgICByZXF1\
aXJlZDogVHJ1ZQogICAgZGlzcGxheV9ncm91cDogTW9uZ29EQiBDbHVzdGVyIENvbmZpZ3VyYXRp\
b24KICAtIG5hbWU6IG1vbmdvZGJfdmVyc2lvbgogICAgdGl0bGU6IE1vbmdvREIgVmVyc2lvbgog\
ICAgdHlwZTogZW51bQogICAgZGVmYXVsdDogJzMuNC4xMycKICAgIGVudW06IFsgJzMuNC4xMycs\
ICczLjYuMycgXQogICAgcmVxdWlyZWQ6IFRydWUKICAgIGRpc3BsYXlfZ3JvdXA6IE1vbmdvREIg\
Q2x1c3RlciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBtb25nb2RiX3BvcnQgCiAgICB0aXRsZTog\
UG9ydCBmb3IgTW9uZ29EQiB0byBsaXN0ZW4gb24KICAgIHR5cGU6IHN0cmluZwogICAgZGVmYXVs\
dDogIjI3MDAwIgogICAgcmVxdWlyZWQ6IFRydWUKICAgIGRpc3BsYXlfZ3JvdXA6IE1vbmdvREIg\
Q2x1c3RlciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBkaXNrX3NpemVfZ2IKICAgIHRpdGxlOiBT\
aXplIGluIEdiIGZvciBwZXJzaXN0ZW50IHN0b3JhZ2UgY2xhaW0gb24gZGF0YSBub2RlCiAgICBk\
ZWZhdWx0OiAiNSIKICAgIHR5cGU6IHN0cmluZwogICAgZGlzcGxheV9ncm91cDogTW9uZ29EQiBD\
bHVzdGVyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG51bWJlcl9wb2RzX3JzCiAgICB0aXRsZTog\
TnVtYmVyIG9mIG5vZGVzIGluIFJlcGxpY2EgU2V0CiAgICB0eXBlOiBzdHJpbmcgCiAgICBkZWZh\
dWx0OiAiMyIKICAgIHJlcXVpcmVkOiBUcnVlCiAgICBkaXNwbGF5X2dyb3VwOiBNb25nb0RCIFJl\
cGxpY2EgU2V0IENvbmZpZ3VyYXRpb24KCgoKdmVyc2lvbjogMC4xCm5hbWU6IG1vbmdvZGItZW50\
ZXJwcmlzZQpkZXNjcmlwdGlvbjogRGVwbG95IE1vbmdvREIgaW50byBPcGVuc2hpZnQgdGhyb3Vn\
aCBPcHMgTWFuYWdlcgpiaW5kYWJsZTogVHJ1ZQphc3luYzogb3B0aW9uYWwKbWV0YWRhdGE6CiAg\
ZGlzcGxheU5hbWU6IE1vbmdvREIgRW50ZXJwcmlzZQogIGRlcGVuZGVuY2llczogWyAnY2VudG9z\
JyBdCiAgaW1hZ2VVcmw6IGh0dHBzOi8vd3d3Lm1vbmdvZGIuY29tL2Fzc2V0cy9pbWFnZXMvY2xv\
dWQvYXRsYXMvaWxsdXN0cmF0aW9ucy9saXZlLWltcG9ydC5wbmcKICBkb2N1bWVudGF0aW9uVXJs\
OiBodHRwczovL2dpdGh1Yi5jb20vamFzb25taW1pY2svbW9uZ29kYi1vcGVuc2hpZnQtZGV2LXBy\
ZXZpZXcKcGxhbnM6CiAgLSBuYW1lOiByZXBsaWNhc2V0CiAgICBkZXNjcmlwdGlvbjogVGhpcyBw\
bGFuIGRlcGxveXMgYSBNb25nb0RCIHJlcGxpY2Egc2V0CiAgICBmcmVlOiBUcnVlCiAgICBtZXRh\
ZGF0YTogCiAgICAgZGlzcGxheU5hbWU6IE1vbmdvREIgUmVwbGljYSBTZXQKICAgICBsb25nRGVz\
Y3JpcHRpb246IFRoaXMgcGxhbiBkZXBsb3lzIGEgTW9uZ29EQiByZXBsaWNhCiAgICAgY29zdDog\
JDAuMDAKICAgIHBhcmFtZXRlcnM6ICpyZXBsaWNhc2V0CiAgLSBuYW1lOiBhZ2VudC1vbmx5CiAg\
ICBkZXNjcmlwdGlvbjogRGVwbG95cyBuLXBvZHMgd2l0aCBvbmx5IHRoZSBhZ2VudHMKICAgIGZy\
ZWU6IFRydWUKICAgIG1ldGFkYXRhOgogICAgICBkZXNjcmlwdGlvbjogTW9uZ29EQiBBZ2VudHMt\
T25seQogICAgICBsb25nRGVzY3JpcHRpb246IFRoaXMgcGxhbiBkZXBsb3lzIHNvbWUgbnVtYmVy\
IG9mIHBvZHMgZWFjaCB3aXRoIG9ubHkgMSBvZiBlYWNoIHR5cGUgb2YgTW9uZ29EQiBPcHMgTWFu\
YWdlciBhZ2VudC4gTm8gYWN0dWFsIE1vbmdvREIgaW5zdGFuY2VzIGFyZSBwcm92aXNpb25lZC4g\
RWFjaCBhZ2VudCBpcyBhc3NvY2lhdGVkIHdpdGggdGhlIGRlc2lyZWQgcHJvamVjdC4gVGhpcyBi\
YXNlIHBvcyBhbGxvd3MgdXNlcnMgdG8gY29uZmlndXJlIG1vcmUgYWR2YW5jZWQgY2x1c3RlcnMg\
ZGlyZWN0bHkgdGhyb3VnaCBNb25nb0RCIE9wcyBNYW5hZ2VyLgogICAgICBjb3N0OiAkMSwwMDAs\
MDAwVVMKICAgIHBhcmFtZXRlcnM6ICphZ2VudHNvbmx5Cgo="






























COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY library /opt/ansible/library
RUN chmod -R g=u /opt/{ansible,apb}
ENV ANSIBLE_LIBRARY /opt/ansible/library
ENV ANSIBLE_ROLES_PATH /opt/ansible/roles:/etc/ansible/roles
USER apb
