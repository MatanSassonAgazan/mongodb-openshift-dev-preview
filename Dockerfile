FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"YWdlbnRzb25seTogJmFnZW50c29ubHkKICAtIG5hbWU6IG1tc19iYXNlX3VybAogICAgdGl0bGU6\
IE9wcyBNYW5hZ2VyIFVSTAogICAgdHlwZTogc3RyaW5nCiAgICByZXF1aXJlZDogVHJ1ZQogICAg\
ZGVmYXVsdDogJ2h0dHA6Ly9qYXNvbnNtYWNib29rNTUubGFuOjgwODAnCiAgICBkaXNwbGF5X2dy\
b3VwOiBNb25nb0RCIE9wcyBNYW5hZ2VyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG1tc191c2Vy\
CiAgICB0aXRsZTogT3BzIE1hbmFnZXIgdXNlcgogICAgdHlwZTogc3RyaW5nCiAgICByZXF1aXJl\
ZDogVHJ1ZQogICAgZGVmYXVsdDogamFzb24ubWltaWNrQG1vbmdvZGIuY29tCiAgICBkaXNwbGF5\
X2dyb3VwOiBNb25nb0RCIE9wcyBNYW5hZ2VyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG1tc191\
c2VyX2FwaWtleQogICAgdGl0bGU6IFVzZXIncyBPcHMgTWFuYWdlciBBUEkga2V5CiAgICB0eXBl\
OiBzdHJpbmcKICAgIHJlcXVpcmVkOiBUcnVlCiAgICBkZWZhdWx0OiAwZjRhNzJlZS1kNWM2LTQ3\
MjktYWZmMC04MWZiY2I5MzFmNzUKICAgIGRpc3BsYXlfdHlwZTogc3RyaW5nCiAgICBkaXNwbGF5\
X2dyb3VwOiBNb25nb0RCIE9wcyBNYW5hZ2VyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG1tc19w\
cm9qZWN0X25hbWUKICAgIHRpdGxlOiBQcm9qZWN0IHRvIGNyZWF0ZSByZXBsaWNhIHNldCBpbgog\
ICAgZGVmYXVsdDogIiIKICAgIHR5cGU6IHN0cmluZwogICAgZGlzcGxheV9ncm91cDogTW9uZ29E\
QiBPcHMgTWFuYWdlciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBtbXNfZGVmYXVsdF9vcmdJZAog\
ICAgdGl0bGU6IE9yZ2FuaXphdGlvbiBmb3IgbmV3IHByb2plY3QKICAgIGRlZmF1bHQ6ICI1YTkz\
NjJkNjZjZWY0NzBjMzc1YTk4NTUiCiAgICB0eXBlOiBzdHJpbmcKICAgIGRpc3BsYXlfZ3JvdXA6\
IE1vbmdvREIgT3BzIE1hbmFnZXIgQ29uZmlndXJhdGlvbgogIC0gbmFtZTogbW1zX2FwaV90aW1l\
b3V0CiAgICB0aXRsZTogTW9uZ29EQiBPcHMgTWFuYWdlciBBUEkgVGltZW91dCBpbiBzZWNvbmRz\
CiAgICBkZWZhdWx0OiAiMzAiCiAgICB0eXBlOiBzdHJpbmcKICAgIGRpc3BsYXlfZ3JvdXA6IE1v\
bmdvREIgT3BzIE1hbmFnZXIgQ29uZmlndXJhdGlvbgogIC0gbmFtZTogY2x1c3Rlcl9uYW1lCiAg\
ICB0aXRsZTogTW9uZ29EQiBDbHVzdGVyIE5hbWUKICAgIHR5cGU6IHN0cmluZwogICAgZGVmYXVs\
dDogCiAgICByZXF1aXJlZDogVHJ1ZQogICAgZGlzcGxheV9ncm91cDogTW9uZ29EQiBDbHVzdGVy\
IENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG1vbmdvZGJfdmVyc2lvbgogICAgdGl0bGU6IE1vbmdv\
REIgVmVyc2lvbgogICAgdHlwZTogZW51bQogICAgZGVmYXVsdDogJzMuNC4xMycKICAgIGVudW06\
IFsgJzMuNC4xMycsICczLjYuMycgXQogICAgcmVxdWlyZWQ6IFRydWUKICAgIGRpc3BsYXlfZ3Jv\
dXA6IE1vbmdvREIgQ2x1c3RlciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBtb25nb2RiX3BvcnQg\
CiAgICB0aXRsZTogUG9ydCBmb3IgTW9uZ29EQiB0byBsaXN0ZW4gb24KICAgIHR5cGU6IHN0cmlu\
ZwogICAgZGVmYXVsdDogIjI3MDAwIgogICAgcmVxdWlyZWQ6IFRydWUKICAgIGRpc3BsYXlfZ3Jv\
dXA6IE1vbmdvREIgQ2x1c3RlciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBkaXNrX3NpemVfZ2IK\
ICAgIHRpdGxlOiBTaXplIGluIEdiIGZvciBwZXJzaXN0ZW50IHN0b3JhZ2UgY2xhaW0gb24gZGF0\
YSBub2RlCiAgICBkZWZhdWx0OiAiNSIKICAgIHR5cGU6IHN0cmluZwogICAgZGlzcGxheV9ncm91\
cDogTW9uZ29EQiBDbHVzdGVyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG51bWJlcl9wb2RzX2Fh\
CiAgICB0aXRsZTogTnVtYmVyIG9mIGFnZW50cy1vbmx5IHBvZHMKICAgIHR5cGU6IHN0cmluZwog\
ICAgZGVmYXVsdDogIjEzIgogICAgcmVxdWlyZWQ6IFRydWUKICAgIGRpc3BsYXlfZ3JvdXA6IE1v\
bmdvREIgQWdlbnRzIE9ubHkgUG9kcyBDb25maWd1cmF0aW9uCgpyZXBsaWNhc2V0OiAmcmVwbGlj\
YXNldAogIC0gbmFtZTogbW1zX2Jhc2VfdXJsCiAgICB0aXRsZTogT3BzIE1hbmFnZXIgVVJMCiAg\
ICB0eXBlOiBzdHJpbmcKICAgIHJlcXVpcmVkOiBUcnVlCiAgICBkZWZhdWx0OiAnaHR0cDovL2ph\
c29uc21hY2Jvb2s1NWxvY2FsLmxvY2FsOjgwODAnCiAgICBkaXNwbGF5X2dyb3VwOiBNb25nb0RC\
IE9wcyBNYW5hZ2VyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG1tc191c2VyCiAgICB0aXRsZTog\
T3BzIE1hbmFnZXIgdXNlcgogICAgdHlwZTogc3RyaW5nCiAgICByZXF1aXJlZDogVHJ1ZQogICAg\
ZGVmYXVsdDogamFzb24ubWltaWNrQG1vbmdvZGIuY29tCiAgICBkaXNwbGF5X2dyb3VwOiBNb25n\
b0RCIE9wcyBNYW5hZ2VyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG1tc191c2VyX2FwaWtleQog\
ICAgdGl0bGU6IFVzZXIncyBPcHMgTWFuYWdlciBBUEkga2V5CiAgICB0eXBlOiBzdHJpbmcKICAg\
IHJlcXVpcmVkOiBUcnVlCiAgICBkZWZhdWx0OiAwZjRhNzJlZS1kNWM2LTQ3MjktYWZmMC04MWZi\
Y2I5MzFmNzUKICAgIGRpc3BsYXlfdHlwZTogc3RyaW5nCiAgICBkaXNwbGF5X2dyb3VwOiBNb25n\
b0RCIE9wcyBNYW5hZ2VyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG1tc19wcm9qZWN0X25hbWUK\
ICAgIHRpdGxlOiBQcm9qZWN0IHRvIGNyZWF0ZSByZXBsaWNhIHNldCBpbgogICAgZGVmYXVsdDog\
IiIKICAgIHR5cGU6IHN0cmluZwogIC0gbmFtZTogbW1zX2RlZmF1bHRfb3JnSWQKICAgIHRpdGxl\
OiBPcmdhbml6YXRpb24gZm9yIG5ldyBwcm9qZWN0CiAgICBkZWZhdWx0OiAiNWE5MzYyZDY2Y2Vm\
NDcwYzM3NWE5ODU1IgogICAgdHlwZTogc3RyaW5nCiAgICBkaXNwbGF5X2dyb3VwOiBNb25nb0RC\
IE9wcyBNYW5hZ2VyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG1tc19hcGlfdGltZW91dAogICAg\
dGl0bGU6IE1vbmdvREIgT3BzIE1hbmFnZXIgQVBJIFRpbWVvdXQgaW4gc2Vjb25kcwogICAgZGVm\
YXVsdDogIjMwIgogICAgdHlwZTogc3RyaW5nCiAgICBkaXNwbGF5X2dyb3VwOiBNb25nb0RCIE9w\
cyBNYW5hZ2VyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IGNsdXN0ZXJfbmFtZQogICAgdGl0bGU6\
IE1vbmdvREIgQ2x1c3RlciBOYW1lCiAgICB0eXBlOiBzdHJpbmcKICAgIGRlZmF1bHQ6IAogICAg\
cmVxdWlyZWQ6IFRydWUKICAgIGRpc3BsYXlfZ3JvdXA6IE1vbmdvREIgQ2x1c3RlciBDb25maWd1\
cmF0aW9uCiAgLSBuYW1lOiBtb25nb2RiX3ZlcnNpb24KICAgIHRpdGxlOiBNb25nb0RCIFZlcnNp\
b24KICAgIHR5cGU6IGVudW0KICAgIGRlZmF1bHQ6ICczLjQuMTMnCiAgICBlbnVtOiBbICczLjQu\
MTMnLCAnMy42LjMnIF0KICAgIHJlcXVpcmVkOiBUcnVlCiAgICBkaXNwbGF5X2dyb3VwOiBNb25n\
b0RCIENsdXN0ZXIgQ29uZmlndXJhdGlvbgogIC0gbmFtZTogbW9uZ29kYl9wb3J0IAogICAgdGl0\
bGU6IFBvcnQgZm9yIE1vbmdvREIgdG8gbGlzdGVuIG9uCiAgICB0eXBlOiBzdHJpbmcKICAgIGRl\
ZmF1bHQ6ICIyNzAwMCIKICAgIHJlcXVpcmVkOiBUcnVlCiAgICBkaXNwbGF5X2dyb3VwOiBNb25n\
b0RCIENsdXN0ZXIgQ29uZmlndXJhdGlvbgogIC0gbmFtZTogZGlza19zaXplX2diCiAgICB0aXRs\
ZTogU2l6ZSBpbiBHYiBmb3IgcGVyc2lzdGVudCBzdG9yYWdlIGNsYWltIG9uIGRhdGEgbm9kZQog\
ICAgZGVmYXVsdDogIjUiCiAgICB0eXBlOiBzdHJpbmcKICAgIGRpc3BsYXlfZ3JvdXA6IE1vbmdv\
REIgQ2x1c3RlciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBudW1iZXJfcG9kc19ycwogICAgdGl0\
bGU6IE51bWJlciBvZiBub2RlcyBpbiBSZXBsaWNhIFNldAogICAgdHlwZTogc3RyaW5nIAogICAg\
ZGVmYXVsdDogIjMiCiAgICByZXF1aXJlZDogVHJ1ZQogICAgZGlzcGxheV9ncm91cDogTW9uZ29E\
QiBSZXBsaWNhIFNldCBDb25maWd1cmF0aW9uCgoKCnZlcnNpb246IDAuMQpuYW1lOiBtb25nb2Ri\
LWVudGVycHJpc2UKZGVzY3JpcHRpb246IERlcGxveSBNb25nb0RCIGludG8gT3BlbnNoaWZ0IHRo\
cm91Z2ggT3BzIE1hbmFnZXIKYmluZGFibGU6IFRydWUKYXN5bmM6IG9wdGlvbmFsCm1ldGFkYXRh\
OgogIGRpc3BsYXlOYW1lOiBNb25nb0RCIEVudGVycHJpc2UKICBkZXBlbmRlbmNpZXM6IFsgJ2Nl\
bnRvcycgXQogIGltYWdlVXJsOiBodHRwczovL3d3dy5tb25nb2RiLmNvbS9hc3NldHMvaW1hZ2Vz\
L2Nsb3VkL2F0bGFzL2lsbHVzdHJhdGlvbnMvbGl2ZS1pbXBvcnQucG5nCiAgZG9jdW1lbnRhdGlv\
blVybDogaHR0cHM6Ly9naXRodWIuY29tL2phc29ubWltaWNrL21vbmdvZGItb3BlbnNoaWZ0LWRl\
di1wcmV2aWV3CnBsYW5zOgogIC0gbmFtZTogcmVwbGljYXNldAogICAgZGVzY3JpcHRpb246IFRo\
aXMgcGxhbiBkZXBsb3lzIGEgTW9uZ29EQiByZXBsaWNhIHNldAogICAgZnJlZTogVHJ1ZQogICAg\
bWV0YWRhdGE6IAogICAgIGRpc3BsYXlOYW1lOiBNb25nb0RCIFJlcGxpY2EgU2V0CiAgICAgbG9u\
Z0Rlc2NyaXB0aW9uOiBUaGlzIHBsYW4gZGVwbG95cyBhIE1vbmdvREIgcmVwbGljYQogICAgIGNv\
c3Q6ICQwLjAwCiAgICBwYXJhbWV0ZXJzOiAqcmVwbGljYXNldAogIC0gbmFtZTogYWdlbnQtb25s\
eQogICAgZGVzY3JpcHRpb246IERlcGxveXMgbi1wb2RzIHdpdGggb25seSB0aGUgYWdlbnRzCiAg\
ICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToKICAgICAgZGVzY3JpcHRpb246IE1vbmdvREIgQWdl\
bnRzLU9ubHkKICAgICAgbG9uZ0Rlc2NyaXB0aW9uOiBUaGlzIHBsYW4gZGVwbG95cyBzb21lIG51\
bWJlciBvZiBwb2RzIGVhY2ggd2l0aCBvbmx5IDEgb2YgZWFjaCB0eXBlIG9mIE1vbmdvREIgT3Bz\
IE1hbmFnZXIgYWdlbnQuIE5vIGFjdHVhbCBNb25nb0RCIGluc3RhbmNlcyBhcmUgcHJvdmlzaW9u\
ZWQuIEVhY2ggYWdlbnQgaXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBkZXNpcmVkIHByb2plY3QuIFRo\
aXMgYmFzZSBwb3MgYWxsb3dzIHVzZXJzIHRvIGNvbmZpZ3VyZSBtb3JlIGFkdmFuY2VkIGNsdXN0\
ZXJzIGRpcmVjdGx5IHRocm91Z2ggTW9uZ29EQiBPcHMgTWFuYWdlci4KICAgICAgY29zdDogJDEs\
MDAwLDAwMFVTCiAgICBwYXJhbWV0ZXJzOiAqYWdlbnRzb25seQoK"






























COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY library /opt/ansible/library
RUN chmod -R g=u /opt/{ansible,apb}
ENV ANSIBLE_LIBRARY /opt/ansible/library
ENV ANSIBLE_ROLES_PATH /opt/ansible/roles:/etc/ansible/roles
USER apb
